{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 31, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACvB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/layout/main-layout.tsx"],"sourcesContent":["// src/components/layout/main-layout.tsx\n'use client';\n\nimport Link from 'next/link';\nimport { usePathname } from 'next/navigation';\nimport { MessageCircle, Phone, Users, Settings, ArrowLeft } from 'lucide-react';\nimport { Button } from '@/components/ui/button';\nimport { useRouter } from 'next/navigation';\n\ninterface MainLayoutProps {\n  children: React.ReactNode;\n  title: string;\n  showBackButton?: boolean;\n  headerActions?: React.ReactNode;\n}\n\nconst navItems = [\n  { href: '/', label: 'Chats', icon: MessageCircle },\n  { href: '/calls', label: 'Calls', icon: Phone },\n  { href: '/contacts', label: 'Contacts', icon: Users },\n  { href: '/settings', label: 'Settings', icon: Settings },\n];\n\nexport function MainLayout({ children, title, showBackButton = false, headerActions }: MainLayoutProps) {\n  const pathname = usePathname();\n  const router = useRouter();\n\n  return (\n    <div className=\"flex flex-col h-screen max-w-md mx-auto bg-background shadow-lg border border-border md:rounded-lg overflow-hidden\">\n      <header className=\"bg-primary text-primary-foreground p-4 flex items-center justify-between sticky top-0 z-50 h-16 shadow-md\">\n        <div className=\"flex items-center gap-2 min-w-0\"> {/* Added min-w-0 for truncate to work */}\n          {showBackButton && (\n            <Button variant=\"ghost\" size=\"icon\" className=\"text-primary-foreground hover:bg-primary/80\" onClick={() => router.back()}>\n              <ArrowLeft className=\"h-6 w-6\" />\n            </Button>\n          )}\n          {typeof title === 'string' ? (\n            <h1 className=\"text-xl font-headline font-semibold truncate\">{title}</h1>\n          ) : (\n            <div className=\"text-xl font-headline font-semibold truncate\">{title}</div>\n          )}\n        </div>\n        {headerActions && <div className=\"flex items-center gap-2\">{headerActions}</div>}\n      </header>\n\n      <main className=\"flex-1 overflow-y-auto p-0 pb-16 bg-background\"> {/* Ensure padding bottom for nav, changed from bg-card-background */}\n        {children}\n      </main>\n\n      <nav className=\"fixed bottom-0 left-0 right-0 max-w-md mx-auto bg-card border-t border-border shadow-t-lg h-16 z-50 md:rounded-b-lg\">\n        <div className=\"flex justify-around items-center h-full\">\n          {navItems.map((item) => {\n            const isActive = pathname === item.href || \n                             (item.href === '/' && pathname.startsWith('/chat')) ||\n                             (item.href === '/settings' && pathname === '/settings');\n            return (\n              <Link\n                key={item.label}\n                href={item.href}\n                className={`flex flex-col items-center justify-center p-2 rounded-lg transition-colors duration-200 w-1/4 ${isActive ? 'text-primary' : 'text-muted-foreground hover:text-foreground'}`}\n              >\n                <item.icon className={`h-6 w-6 mb-0.5 ${isActive ? 'fill-primary/20' : ''}`} />\n                <span className={`text-xs font-medium ${isActive ? 'font-semibold' : ''}`}>{item.label}</span>\n              </Link>\n            );\n          })}\n        </div>\n      </nav>\n    </div>\n  );\n}\n"],"names":[],"mappings":"AAAA,wCAAwC;;;;;AAGxC;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AALA;;;;;;;AAeA,MAAM,WAAW;IACf;QAAE,MAAM;QAAK,OAAO;QAAS,MAAM,wNAAA,CAAA,gBAAa;IAAC;IACjD;QAAE,MAAM;QAAU,OAAO;QAAS,MAAM,oMAAA,CAAA,QAAK;IAAC;IAC9C;QAAE,MAAM;QAAa,OAAO;QAAY,MAAM,oMAAA,CAAA,QAAK;IAAC;IACpD;QAAE,MAAM;QAAa,OAAO;QAAY,MAAM,0MAAA,CAAA,WAAQ;IAAC;CACxD;AAEM,SAAS,WAAW,EAAE,QAAQ,EAAE,KAAK,EAAE,iBAAiB,KAAK,EAAE,aAAa,EAAmB;IACpG,MAAM,WAAW,CAAA,GAAA,kIAAA,CAAA,cAAW,AAAD;IAC3B,MAAM,SAAS,CAAA,GAAA,kIAAA,CAAA,YAAS,AAAD;IAEvB,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAO,WAAU;;kCAChB,8OAAC;wBAAI,WAAU;;4BAAkC;4BAC9C,gCACC,8OAAC,kIAAA,CAAA,SAAM;gCAAC,SAAQ;gCAAQ,MAAK;gCAAO,WAAU;gCAA8C,SAAS,IAAM,OAAO,IAAI;0CACpH,cAAA,8OAAC,gNAAA,CAAA,YAAS;oCAAC,WAAU;;;;;;;;;;;4BAGxB,OAAO,UAAU,yBAChB,8OAAC;gCAAG,WAAU;0CAAgD;;;;;qDAE9D,8OAAC;gCAAI,WAAU;0CAAgD;;;;;;;;;;;;oBAGlE,+BAAiB,8OAAC;wBAAI,WAAU;kCAA2B;;;;;;;;;;;;0BAG9D,8OAAC;gBAAK,WAAU;;oBAAiD;oBAC9D;;;;;;;0BAGH,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;8BACZ,SAAS,GAAG,CAAC,CAAC;wBACb,MAAM,WAAW,aAAa,KAAK,IAAI,IACrB,KAAK,IAAI,KAAK,OAAO,SAAS,UAAU,CAAC,YACzC,KAAK,IAAI,KAAK,eAAe,aAAa;wBAC5D,qBACE,8OAAC,4JAAA,CAAA,UAAI;4BAEH,MAAM,KAAK,IAAI;4BACf,WAAW,CAAC,8FAA8F,EAAE,WAAW,iBAAiB,+CAA+C;;8CAEvL,8OAAC,KAAK,IAAI;oCAAC,WAAW,CAAC,eAAe,EAAE,WAAW,oBAAoB,IAAI;;;;;;8CAC3E,8OAAC;oCAAK,WAAW,CAAC,oBAAoB,EAAE,WAAW,kBAAkB,IAAI;8CAAG,KAAK,KAAK;;;;;;;2BALjF,KAAK,KAAK;;;;;oBAQrB;;;;;;;;;;;;;;;;;AAKV","debugId":null}},
    {"offset": {"line": 264, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/icons/custom-icons.tsx"],"sourcesContent":["import type { SVGProps } from 'react';\n\nexport function PdfIcon(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\"\n      height=\"24\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      {...props}\n    >\n      <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\" />\n      <polyline points=\"14 2 14 8 20 8\" />\n      <line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\" />\n      <line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\" />\n      <polyline points=\"10 9 9 9 8 9\" />\n      <text x=\"8\" y=\"16\" fontSize=\"3\" fill=\"currentColor\" fontWeight=\"bold\">PDF</text>\n    </svg>\n  );\n}\n\nexport function DocxIcon(props: SVGProps<SVGSVGElement>) {\n  return (\n    <svg\n      xmlns=\"http://www.w3.org/2000/svg\"\n      width=\"24\"\n      height=\"24\"\n      viewBox=\"0 0 24 24\"\n      fill=\"none\"\n      stroke=\"currentColor\"\n      strokeWidth=\"2\"\n      strokeLinecap=\"round\"\n      strokeLinejoin=\"round\"\n      {...props}\n    >\n      <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\" />\n      <polyline points=\"14 2 14 8 20 8\" />\n      <line x1=\"16\" y1=\"13\" x2=\"8\" y2=\"13\" />\n      <line x1=\"16\" y1=\"17\" x2=\"8\" y2=\"17\" />\n      <line x1=\"10\" y1=\"9\" x2=\"8\" y2=\"9\" />\n       <text x=\"6\" y=\"16\" fontSize=\"2.5\" fill=\"currentColor\" fontWeight=\"bold\">DOCX</text>\n    </svg>\n  );\n}\n"],"names":[],"mappings":";;;;;;AAEO,SAAS,QAAQ,KAA8B;IACpD,qBACE,8OAAC;QACC,OAAM;QACN,OAAM;QACN,QAAO;QACP,SAAQ;QACR,MAAK;QACL,QAAO;QACP,aAAY;QACZ,eAAc;QACd,gBAAe;QACd,GAAG,KAAK;;0BAET,8OAAC;gBAAK,GAAE;;;;;;0BACR,8OAAC;gBAAS,QAAO;;;;;;0BACjB,8OAAC;gBAAK,IAAG;gBAAK,IAAG;gBAAK,IAAG;gBAAI,IAAG;;;;;;0BAChC,8OAAC;gBAAK,IAAG;gBAAK,IAAG;gBAAK,IAAG;gBAAI,IAAG;;;;;;0BAChC,8OAAC;gBAAS,QAAO;;;;;;0BACjB,8OAAC;gBAAK,GAAE;gBAAI,GAAE;gBAAK,UAAS;gBAAI,MAAK;gBAAe,YAAW;0BAAO;;;;;;;;;;;;AAG5E;AAEO,SAAS,SAAS,KAA8B;IACrD,qBACE,8OAAC;QACC,OAAM;QACN,OAAM;QACN,QAAO;QACP,SAAQ;QACR,MAAK;QACL,QAAO;QACP,aAAY;QACZ,eAAc;QACd,gBAAe;QACd,GAAG,KAAK;;0BAET,8OAAC;gBAAK,GAAE;;;;;;0BACR,8OAAC;gBAAS,QAAO;;;;;;0BACjB,8OAAC;gBAAK,IAAG;gBAAK,IAAG;gBAAK,IAAG;gBAAI,IAAG;;;;;;0BAChC,8OAAC;gBAAK,IAAG;gBAAK,IAAG;gBAAK,IAAG;gBAAI,IAAG;;;;;;0BAChC,8OAAC;gBAAK,IAAG;gBAAK,IAAG;gBAAI,IAAG;gBAAI,IAAG;;;;;;0BAC9B,8OAAC;gBAAK,GAAE;gBAAI,GAAE;gBAAK,UAAS;gBAAM,MAAK;gBAAe,YAAW;0BAAO;;;;;;;;;;;;AAG/E","debugId":null}},
    {"offset": {"line": 425, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/popover.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n"],"names":[],"mappings":";;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,UAAU,mKAAA,CAAA,OAAqB;AAErC,MAAM,iBAAiB,mKAAA,CAAA,UAAwB;AAE/C,MAAM,+BAAiB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGpC,CAAC,EAAE,SAAS,EAAE,QAAQ,QAAQ,EAAE,aAAa,CAAC,EAAE,GAAG,OAAO,EAAE,oBAC5D,8OAAC,mKAAA,CAAA,SAAuB;kBACtB,cAAA,8OAAC,mKAAA,CAAA,UAAwB;YACvB,KAAK;YACL,OAAO;YACP,YAAY;YACZ,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,8aACA;YAED,GAAG,KAAK;;;;;;;;;;;AAIf,eAAe,WAAW,GAAG,mKAAA,CAAA,UAAwB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 466, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/chat/message-bubble.tsx"],"sourcesContent":["import type { Message, User, Attachment } from '@/lib/types';\nimport { cn } from '@/lib/utils';\nimport { format } from 'date-fns';\nimport Image from 'next/image';\nimport { Check, CheckCheck, Clock, AlertCircle, FileText, Film, Download, SmilePlus } from 'lucide-react';\nimport { PdfIcon, DocxIcon } from '@/components/icons/custom-icons';\nimport { Button } from '@/components/ui/button';\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport Picker, { EmojiClickData, EmojiStyle, Theme as EmojiTheme } from 'emoji-picker-react';\nimport * as React from 'react';\n\n\ninterface MessageBubbleProps {\n  message: Message;\n  currentUser: User;\n  sender?: User;\n  onToggleReaction: (messageId: string, emoji: string) => void;\n}\n\nconst AttachmentPreview = ({ attachment }: { attachment: Attachment }) => {\n  const commonImageClass = \"rounded-md object-cover max-w-xs max-h-60\";\n  switch (attachment.type) {\n    case 'image':\n      return <Image src={attachment.url} alt={attachment.fileName || 'Image attachment'} width={300} height={200} className={commonImageClass} data-ai-hint=\"photo message\" />;\n    case 'video':\n      return (\n        <div className=\"relative max-w-xs bg-black rounded-md overflow-hidden\">\n          {attachment.thumbnailUrl ? (\n            <Image src={attachment.thumbnailUrl} alt={attachment.fileName || 'Video thumbnail'} width={300} height={180} className=\"object-cover opacity-70\" data-ai-hint=\"video play\" />\n          ) : (\n            <div className=\"w-[300px] h-[180px] bg-muted flex items-center justify-center rounded-md\">\n              <Film className=\"w-12 h-12 text-muted-foreground\" />\n            </div>\n          )}\n          <div className=\"absolute inset-0 flex items-center justify-center\">\n            <div className=\"bg-black/50 p-3 rounded-full\">\n              <Film className=\"w-8 h-8 text-white\" />\n            </div>\n          </div>\n          {attachment.fileName && <p className=\"text-xs text-white bg-black/70 p-1 absolute bottom-1 left-1 rounded\">{attachment.fileName}</p>}\n        </div>\n      );\n    case 'pdf':\n      return (\n        <div className=\"flex items-center gap-2 p-2 border rounded-md bg-secondary/30 hover:bg-secondary/50 transition-colors cursor-pointer min-w-[200px]\">\n          <PdfIcon className=\"w-8 h-8 text-red-600 flex-shrink-0\" />\n          <div className=\"truncate\">\n            <p className=\"text-sm font-medium truncate\">{attachment.fileName || 'PDF Document'}</p>\n            <p className=\"text-xs text-muted-foreground\">PDF File</p>\n          </div>\n          <Download className=\"w-5 h-5 text-muted-foreground ml-auto\"/>\n        </div>\n      );\n    case 'docx':\n      return (\n        <div className=\"flex items-center gap-2 p-2 border rounded-md bg-secondary/30 hover:bg-secondary/50 transition-colors cursor-pointer min-w-[200px]\">\n          <DocxIcon className=\"w-8 h-8 text-blue-600 flex-shrink-0\" />\n          <div className=\"truncate\">\n            <p className=\"text-sm font-medium truncate\">{attachment.fileName || 'Word Document'}</p>\n            <p className=\"text-xs text-muted-foreground\">DOCX File</p>\n          </div>\n           <Download className=\"w-5 h-5 text-muted-foreground ml-auto\"/>\n        </div>\n      );\n    default:\n      return (\n         <div className=\"flex items-center gap-2 p-2 border rounded-md bg-secondary/30 hover:bg-secondary/50 transition-colors cursor-pointer min-w-[200px]\">\n          <FileText className=\"w-8 h-8 text-muted-foreground flex-shrink-0\" />\n           <div className=\"truncate\">\n            <p className=\"text-sm font-medium truncate\">{attachment.fileName || 'File'}</p>\n            <p className=\"text-xs text-muted-foreground\">Attachment</p>\n          </div>\n          <Download className=\"w-5 h-5 text-muted-foreground ml-auto\"/>\n        </div>\n      );\n  }\n};\n\nconst MessageStatusIcon = ({ status }: { status: Message['status'] }) => {\n  if (status === 'sending') return <Clock className=\"h-3.5 w-3.5 text-muted-foreground\" />;\n  if (status === 'sent') return <Check className=\"h-3.5 w-3.5 text-muted-foreground\" />;\n  if (status === 'delivered') return <CheckCheck className=\"h-3.5 w-3.5 text-muted-foreground\" />;\n  if (status === 'read') return <CheckCheck className=\"h-3.5 w-3.5 text-accent\" />; // Use accent for read\n  if (status === 'failed') return <AlertCircle className=\"h-3.5 w-3.5 text-destructive\" />;\n  return null;\n};\n\n\nexport function MessageBubble({ message, currentUser, sender, onToggleReaction }: MessageBubbleProps) {\n  const isSentByCurrentUser = message.senderId === currentUser.id;\n  const [emojiPopoverOpen, setEmojiPopoverOpen] = React.useState(false);\n\n  const handleEmojiSelect = (emojiData: EmojiClickData) => {\n    onToggleReaction(message.id, emojiData.emoji);\n    setEmojiPopoverOpen(false);\n  };\n  \n  const handleReactionClick = (emoji: string) => {\n    onToggleReaction(message.id, emoji);\n  };\n\n  return (\n    <div className={cn('flex mb-1 px-3 group relative', isSentByCurrentUser ? 'justify-end' : 'justify-start')}>\n      <div\n        className={cn(\n          'max-w-[70%] p-2.5 rounded-xl shadow-sm relative', // Added relative for PopoverTrigger positioning\n          isSentByCurrentUser\n            ? 'bg-primary text-primary-foreground rounded-br-none'\n            : 'bg-card text-card-foreground border border-border rounded-bl-none'\n        )}\n      >\n        {!isSentByCurrentUser && sender && (\n          <p className=\"text-xs font-semibold mb-0.5 opacity-80\">{sender.name}</p>\n        )}\n        {message.attachments && message.attachments.length > 0 && (\n          <div className=\"space-y-2 my-1\">\n            {message.attachments.map((att, index) => (\n              <AttachmentPreview key={index} attachment={att} />\n            ))}\n          </div>\n        )}\n        {message.content && <p className=\"whitespace-pre-wrap break-words\">{message.content}</p>}\n        \n        <div className={cn('flex items-center gap-1 mt-1', isSentByCurrentUser ? 'justify-end' : 'justify-start')}>\n          <p className=\"text-xs opacity-70\">{format(new Date(message.timestamp), 'HH:mm')}</p>\n          {isSentByCurrentUser && <MessageStatusIcon status={message.status} />}\n        </div>\n\n        {message.emojis && message.emojis.length > 0 && (\n          <div className={cn(\n            \"flex flex-wrap gap-1 mt-1.5 px-1 py-0.5 rounded-full w-fit\",\n            isSentByCurrentUser ? \"bg-primary/80\" : \"bg-muted\"\n            )}>\n            {message.emojis.map((emoji, index) => (\n              <button\n                key={index}\n                onClick={() => handleReactionClick(emoji)}\n                className={cn(\n                  \"text-xs p-0.5 rounded hover:bg-opacity-50\",\n                  isSentByCurrentUser ? \"hover:bg-primary-foreground/20\" : \"hover:bg-foreground/10\"\n                )}\n                title={`React with ${emoji}`}\n              >\n                {emoji}\n              </button>\n            ))}\n          </div>\n        )}\n      </div>\n      <Popover open={emojiPopoverOpen} onOpenChange={setEmojiPopoverOpen}>\n        <PopoverTrigger asChild>\n          <Button\n            variant=\"ghost\"\n            size=\"icon\"\n            className={cn(\n              \"absolute -top-3 p-1 rounded-full bg-card border shadow-md h-7 w-7 opacity-0 group-hover:opacity-100 group-focus-within:opacity-100 transition-opacity\",\n              isSentByCurrentUser ? \"right-1\" : \"left-1\"\n            )}\n          >\n            <SmilePlus className={cn(\"h-4 w-4\", isSentByCurrentUser ? \"text-primary\" : \"text-muted-foreground\")} />\n          </Button>\n        </PopoverTrigger>\n        <PopoverContent className=\"p-0 w-auto border-none shadow-lg z-30\">\n           <Picker \n              onEmojiClick={handleEmojiSelect} \n              theme={EmojiTheme.AUTO} \n              emojiStyle={EmojiStyle.NATIVE}\n              width=\"100%\"\n              height={300}\n              searchDisabled\n              previewConfig={{showPreview: false}}\n            />\n        </PopoverContent>\n      </Popover>\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 924, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport {cn} from '@/lib/utils';\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<'textarea'>>(\n  ({className, ...props}, ref) => {\n    return (\n      <textarea\n        className={cn(\n          'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nTextarea.displayName = 'Textarea';\n\nexport {Textarea};\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC9B,CAAC,EAAC,SAAS,EAAE,GAAG,OAAM,EAAE;IACtB,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 952, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/chat/chat-input.tsx"],"sourcesContent":["\n'use client';\n\nimport { useState, useRef, type FormEvent } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Paperclip, Send, SmilePlus, Image as ImageIcon, Film } from 'lucide-react';\nimport { Popover, PopoverContent, PopoverTrigger } from \"@/components/ui/popover\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { PdfIcon, DocxIcon } from '@/components/icons/custom-icons';\nimport Picker, { EmojiClickData, EmojiStyle, Theme as EmojiTheme } from 'emoji-picker-react';\n\ninterface ChatInputProps {\n  onSendMessage: (content: string, attachments?: File[]) => void; // attachments for future use\n}\n\nexport function ChatInput({ onSendMessage }: ChatInputProps) {\n  const [message, setMessage] = useState('');\n  const textareaRef = useRef<HTMLTextAreaElement>(null);\n  const { toast } = useToast();\n  const [emojiPopoverOpen, setEmojiPopoverOpen] = useState(false);\n\n  const handleEmojiPickerSelect = (emojiData: EmojiClickData) => {\n    setMessage((prevMessage) => prevMessage + emojiData.emoji);\n    textareaRef.current?.focus();\n    setEmojiPopoverOpen(false);\n  };\n\n  const handleSubmit = (e: FormEvent) => {\n    e.preventDefault();\n    if (message.trim() === '') return;\n    onSendMessage(message.trim());\n    setMessage('');\n  };\n  \n  const handleAttachment = (type: 'image' | 'video' | 'pdf' | 'docx') => {\n    toast({\n      title: `Attach ${type}`,\n      description: `File selection for ${type} would open here. (UI only)`,\n    });\n  };\n\n  return (\n    <form onSubmit={handleSubmit} className=\"sticky bottom-0 left-0 right-0 bg-card border-t border-border p-3 z-20\">\n      <div className=\"flex items-end gap-2\">\n        <Popover>\n          <PopoverTrigger asChild>\n            <Button variant=\"ghost\" size=\"icon\" type=\"button\" className=\"shrink-0 text-muted-foreground hover:text-primary\">\n              <Paperclip className=\"h-6 w-6\" />\n              <span className=\"sr-only\">Attach file</span>\n            </Button>\n          </PopoverTrigger>\n          <PopoverContent className=\"w-auto p-2 grid grid-cols-2 gap-2\">\n            <Button variant=\"outline\" className=\"flex flex-col h-auto p-3 gap-1\" onClick={() => handleAttachment('image')}>\n              <ImageIcon className=\"h-6 w-6 text-purple-500\"/> <span className=\"text-xs\">Image</span>\n            </Button>\n            <Button variant=\"outline\" className=\"flex flex-col h-auto p-3 gap-1\" onClick={() => handleAttachment('video')}>\n              <Film className=\"h-6 w-6 text-orange-500\"/> <span className=\"text-xs\">Video</span>\n            </Button>\n            <Button variant=\"outline\" className=\"flex flex-col h-auto p-3 gap-1\" onClick={() => handleAttachment('pdf')}>\n              <PdfIcon className=\"h-6 w-6 text-red-500\"/> <span className=\"text-xs\">PDF</span>\n            </Button>\n            <Button variant=\"outline\" className=\"flex flex-col h-auto p-3 gap-1\" onClick={() => handleAttachment('docx')}>\n              <DocxIcon className=\"h-6 w-6 text-blue-500\"/> <span className=\"text-xs\">DOCX</span>\n            </Button>\n          </PopoverContent>\n        </Popover>\n\n        <Popover open={emojiPopoverOpen} onOpenChange={setEmojiPopoverOpen}>\n          <PopoverTrigger asChild>\n            <Button variant=\"ghost\" size=\"icon\" type=\"button\" className=\"shrink-0 text-muted-foreground hover:text-primary\">\n              <SmilePlus className=\"h-6 w-6\" />\n              <span className=\"sr-only\">Add emoji</span>\n            </Button>\n          </PopoverTrigger>\n          <PopoverContent className=\"p-0 w-full sm:w-auto border-none shadow-none\">\n            <Picker \n              onEmojiClick={handleEmojiPickerSelect} \n              theme={EmojiTheme.AUTO} \n              emojiStyle={EmojiStyle.NATIVE}\n              width=\"100%\"\n              height={350}\n              searchDisabled // Disable search for a cleaner look in popover, can be enabled if needed\n              previewConfig={{showPreview: false}} // Disable preview for a cleaner look\n            />\n          </PopoverContent>\n        </Popover>\n\n        <Textarea\n          ref={textareaRef}\n          value={message}\n          onChange={(e) => setMessage(e.target.value)}\n          placeholder=\"Type a message...\"\n          className=\"flex-1 min-h-[44px] max-h-28 resize-none rounded-full px-4 py-2.5 text-sm border-input focus-visible:ring-1 focus-visible:ring-primary\"\n          rows={1}\n          onKeyDown={(e) => {\n            if (e.key === 'Enter' && !e.shiftKey) {\n              e.preventDefault();\n              handleSubmit(e);\n            }\n          }}\n        />\n        <Button type=\"submit\" size=\"icon\" className=\"shrink-0 bg-primary hover:bg-primary/90 rounded-full w-11 h-11\" disabled={message.trim() === ''}>\n          <Send className=\"h-5 w-5 text-primary-foreground\" />\n          <span className=\"sr-only\">Send message</span>\n        </Button>\n      </div>\n    </form>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1294, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/lib/data.ts"],"sourcesContent":["import type { User, Chat, Message, Call, Attachment } from './types';\n\nexport let mockUsers: User[] = [\n  { id: 'user1', name: 'Alice Wonderland', avatarUrl: 'https://placehold.co/100x100.png?text=AW', status: 'online', statusMessage: 'Coding away! ðŸ’»', email: 'alice@example.com', ddi: '+1', ddd: '555', phone: '1234567' },\n  { id: 'user2', name: 'Bob The Builder', avatarUrl: 'https://placehold.co/100x100.png?text=BB', status: 'offline', statusMessage: 'Busy building things.', email: 'bob@example.com', ddi: '+44', ddd: '20', phone: '9876543' },\n  { id: 'user3', name: 'Charlie Chaplin', avatarUrl: 'https://placehold.co/100x100.png?text=CC', status: 'online', statusMessage: 'At the movies ðŸŽ¬', email: 'charlie@example.com' },\n  { id: 'user4', name: 'Diana Prince', avatarUrl: 'https://placehold.co/100x100.png?text=DP', status: 'away', statusMessage: 'Saving the world!' },\n  { id: 'currentUser', name: 'Connectify User', avatarUrl: 'https://placehold.co/100x100.png?text=ME', statusMessage: 'Hey there! I am using Connectify.', email: 'you@example.com' },\n];\n\nconst createMessage = (id: string, senderId: string, chatId: string, content?: string, attachments?: Attachment[], minutesAgo: number = 0, emojis?: string[]): Message => ({\n  id,\n  senderId,\n  chatId,\n  content,\n  attachments,\n  timestamp: Date.now() - minutesAgo * 60 * 1000,\n  status: 'read',\n  emojis: emojis || [],\n});\n\nexport let mockMessages: Message[] = [\n  createMessage('msg1', 'user1', 'chat1', 'Hey Bob, how are you?', undefined, 60, ['ðŸ‘']),\n  createMessage('msg2', 'currentUser', 'chat1', 'Hi Alice! I am good, thanks for asking. How about you?', undefined, 58),\n  createMessage('msg3', 'user1', 'chat1', 'Doing great! Working on a new project.', undefined, 57, ['ðŸŽ‰']),\n  createMessage('msg4', 'currentUser', 'chat1', 'Sounds exciting! What is it about?', undefined, 55),\n  createMessage('msg5', 'user1', 'chat1', 'It is a secret for now ðŸ˜‰', undefined, 50),\n  createMessage('msg6', 'currentUser', 'chat1', 'Haha, okay! Let me know when you can share.', undefined, 48, ['ðŸ˜„']),\n  createMessage('msg7', 'user1', 'chat1', 'Sure thing!', undefined, 45),\n  createMessage('msg8', 'user1', 'chat1', 'Check out this image!', [{ type: 'image', url: 'https://placehold.co/600x400.png', fileName: 'landscape.png' }], 40, ['ðŸ˜®']),\n  createMessage('msg9', 'currentUser', 'chat1', 'Wow, beautiful!', undefined, 38),\n  createMessage('msg10', 'user1', 'chat1', 'And this document.', [{ type: 'pdf', url: '#', fileName: 'project_brief.pdf' }], 35),\n  \n  createMessage('msg11', 'user2', 'chat2', 'Hi! Are we still on for lunch?', undefined, 120),\n  createMessage('msg12', 'currentUser', 'chat2', 'Yes, absolutely! See you at 1 PM.', undefined, 118, ['ðŸ‘']),\n  \n  createMessage('msg13', 'user3', 'chat3', 'Can you call me later?', undefined, 5),\n  createMessage('msg14', 'currentUser', 'chat3', 'Sure, around 5 PM?', undefined, 3),\n  createMessage('msg15', 'user3', 'chat3', 'Perfect!', undefined, 1, ['ðŸ‘Œ']),\n\n  createMessage('msg16', 'user4', 'chat4', 'Did you see the video I sent?', [{type: 'video', url: '#', thumbnailUrl: 'https://placehold.co/300x200.png?text=Video', fileName: 'funny_cat.mp4'}], 10),\n  createMessage('msg17', 'currentUser', 'chat4', 'Not yet, will watch it soon!', undefined, 8),\n];\n\nexport let mockChats: Chat[] = [\n  {\n    id: 'chat1',\n    participants: [mockUsers[0], mockUsers[4]],\n    messages: mockMessages.filter(m => m.chatId === 'chat1').sort((a,b) => a.timestamp - b.timestamp),\n    lastMessage: mockMessages.filter(m => m.chatId === 'chat1').sort((a,b) => b.timestamp - a.timestamp)[0],\n    unreadCount: 0,\n  },\n  {\n    id: 'chat2',\n    participants: [mockUsers[1], mockUsers[4]],\n    messages: mockMessages.filter(m => m.chatId === 'chat2').sort((a,b) => a.timestamp - b.timestamp),\n    lastMessage: mockMessages.filter(m => m.chatId === 'chat2').sort((a,b) => b.timestamp - a.timestamp)[0],\n    unreadCount: 2,\n  },\n  {\n    id: 'chat3',\n    participants: [mockUsers[2], mockUsers[4]],\n    messages: mockMessages.filter(m => m.chatId === 'chat3').sort((a,b) => a.timestamp - b.timestamp),\n    lastMessage: mockMessages.filter(m => m.chatId === 'chat3').sort((a,b) => b.timestamp - a.timestamp)[0],\n    unreadCount: 0,\n  },\n  {\n    id: 'chat4',\n    participants: [mockUsers[3], mockUsers[4]],\n    messages: mockMessages.filter(m => m.chatId === 'chat4').sort((a,b) => a.timestamp - b.timestamp),\n    lastMessage: mockMessages.filter(m => m.chatId === 'chat4').sort((a,b) => b.timestamp - a.timestamp)[0],\n    unreadCount: 1,\n  },\n];\n\nexport const mockCalls: Call[] = [\n  {\n    id: 'call1',\n    type: 'video',\n    status: 'missed',\n    contact: mockUsers[0], // Alice\n    timestamp: Date.now() - 2 * 60 * 60 * 1000, // 2 hours ago\n  },\n  {\n    id: 'call2',\n    type: 'audio',\n    status: 'outgoing',\n    contact: mockUsers[1], // Bob\n    timestamp: Date.now() - 25 * 60 * 1000, // 25 minutes ago\n    duration: 300, // 5 minutes\n  },\n  {\n    id: 'call3',\n    type: 'video',\n    status: 'incoming',\n    contact: mockUsers[2], // Charlie\n    timestamp: Date.now() - 5 * 24 * 60 * 60 * 1000, // 5 days ago\n    duration: 1200, // 20 minutes\n  },\n  {\n    id: 'call4',\n    type: 'audio',\n    status: 'missed',\n    contact: mockUsers[3], // Diana\n    timestamp: Date.now() - 10 * 60 * 1000, // 10 minutes ago\n  },\n   {\n    id: 'call5',\n    type: 'audio',\n    status: 'incoming',\n    contact: mockUsers[0], // Alice\n    timestamp: Date.now() - 3 * 24 * 60 * 60 * 1000, // 3 days ago\n    duration: 600, // 10 minutes\n  },\n];\n\n\nexport const getChatById = (id: string): Chat | undefined => {\n  const chat = mockChats.find(chat => chat.id === id);\n  // Ensure messages are sorted when fetching\n  if (chat) {\n    return {\n      ...chat,\n      messages: [...chat.messages].sort((a, b) => a.timestamp - b.timestamp)\n    };\n  }\n  return undefined;\n};\n\nexport const getUserById = (id: string): User | undefined => mockUsers.find(user => user.id === id);\nexport const getCurrentUser = (): User => mockUsers.find(user => user.id === 'currentUser')!;\n\nexport function addMockUser(newUserInfo: Omit<User, 'id' | 'avatarUrl' | 'status' | 'statusMessage'>): User {\n  const initials = newUserInfo.name.split(' ').map(n => n[0]).join('').substring(0,2).toUpperCase() || '??';\n  const newUser: User = {\n    ...newUserInfo,\n    id: `user${Date.now()}`,\n    avatarUrl: `https://placehold.co/100x100.png?text=${initials}`,\n    status: 'offline', // Default presence status\n    statusMessage: 'Hey there! I am new to Connectify.', // Default status message\n  };\n  mockUsers.push(newUser);\n  return newUser;\n}\n\nexport function updateCurrentUserSettings(settings: { name?: string; avatarUrl?: string; statusMessage?: string }): User | null {\n  const currentUserIndex = mockUsers.findIndex(user => user.id === 'currentUser');\n  if (currentUserIndex !== -1) {\n    const updatedUser = { ...mockUsers[currentUserIndex] };\n    if (settings.name) {\n      updatedUser.name = settings.name;\n    }\n    if (settings.avatarUrl) {\n      updatedUser.avatarUrl = settings.avatarUrl;\n    }\n    if (settings.statusMessage !== undefined) { // Allow empty string for status message\n      updatedUser.statusMessage = settings.statusMessage;\n    }\n    mockUsers[currentUserIndex] = updatedUser;\n\n    // Update user in participants lists of chats (important for UI consistency)\n    mockChats = mockChats.map(chat => ({\n      ...chat,\n      participants: chat.participants.map(p => p.id === 'currentUser' ? updatedUser : p)\n    }));\n\n    return updatedUser;\n  }\n  return null;\n}\n\nexport function addMessageToChat(chatId: string, message: Message): void {\n  const chatIndex = mockChats.findIndex(c => c.id === chatId);\n  if (chatIndex !== -1) {\n    const updatedChat = { ...mockChats[chatIndex] };\n    updatedChat.messages = [...updatedChat.messages, message].sort((a, b) => a.timestamp - b.timestamp);\n    updatedChat.lastMessage = message;\n    \n    // Update the message in the global mockMessages array as well\n    const messageIndex = mockMessages.findIndex(m => m.id === message.id);\n    if (messageIndex !== -1) {\n      mockMessages[messageIndex] = message;\n    } else {\n      mockMessages.push(message);\n    }\n    mockMessages.sort((a,b) => a.timestamp - b.timestamp); // keep it sorted\n\n    mockChats[chatIndex] = updatedChat;\n  } else {\n    const contactId = chatId.replace('chat_with_', '');\n    const contactUser = getUserById(contactId);\n    const currentUser = getCurrentUser();\n    if (contactUser && currentUser) {\n       const newChat: Chat = {\n          id: chatId,\n          participants: [contactUser, currentUser],\n          messages: [message],\n          lastMessage: message,\n          unreadCount: 0, \n        };\n        mockChats.push(newChat);\n        // Add to global messages as well\n        mockMessages.push(message);\n        mockMessages.sort((a,b) => a.timestamp - b.timestamp);\n    }\n  }\n}\n\nexport function toggleEmojiReaction(chatId: string, messageId: string, emoji: string): Message | undefined {\n  const chatIndex = mockChats.findIndex(c => c.id === chatId);\n  if (chatIndex === -1) return undefined;\n\n  const chat = mockChats[chatIndex];\n  const messageIndexInChat = chat.messages.findIndex(m => m.id === messageId);\n  if (messageIndexInChat === -1) return undefined;\n\n  const message = { ...chat.messages[messageIndexInChat] }; // Create a shallow copy\n  message.emojis = message.emojis ? [...message.emojis] : []; // Ensure emojis array exists and is a copy\n\n  const emojiIndex = message.emojis.indexOf(emoji);\n  if (emojiIndex > -1) {\n    message.emojis.splice(emojiIndex, 1); // Remove emoji\n  } else {\n    message.emojis.push(emoji); // Add emoji\n  }\n\n  // Update message in chat's messages array\n  chat.messages[messageIndexInChat] = message;\n\n  // Update message in global mockMessages array\n  const messageIndexGlobal = mockMessages.findIndex(m => m.id === messageId);\n  if (messageIndexGlobal !== -1) {\n    mockMessages[messageIndexGlobal] = message;\n  }\n  \n  // No need to re-sort chats or messages here as only an existing message is modified\n\n  return message; // Return the updated message\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1625, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/avatar.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n"],"names":[],"mappings":";;;;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,OAAoB;QACnB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,OAAO,WAAW,GAAG,kKAAA,CAAA,OAAoB,CAAC,WAAW;AAErD,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,QAAqB;QACpB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,+BAA+B;QAC5C,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG,kKAAA,CAAA,QAAqB,CAAC,WAAW;AAE3D,MAAM,+BAAiB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,WAAwB;QACvB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,wEACA;QAED,GAAG,KAAK;;;;;;AAGb,eAAe,WAAW,GAAG,kKAAA,CAAA,WAAwB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 1676, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;AAAA;;;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACkC;IACrC,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,qCAAqC;QAClD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 1700, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/chat/%5Bid%5D/page.tsx"],"sourcesContent":["'use client';\n\nimport { useEffect, useRef, useState, useCallback } from 'react';\nimport { useParams, useRouter } from 'next/navigation';\nimport { MainLayout } from '@/components/layout/main-layout';\nimport { MessageBubble } from '@/components/chat/message-bubble';\nimport { ChatInput } from '@/components/chat/chat-input';\nimport { getChatById, getCurrentUser, getUserById, addMessageToChat, toggleEmojiReaction } from '@/lib/data';\nimport type { Chat, Message, User } from '@/lib/types';\nimport { Avatar, AvatarFallback, AvatarImage } from '@/components/ui/avatar';\nimport { Button } from '@/components/ui/button';\nimport { Phone, Video, MoreVertical } from 'lucide-react';\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Skeleton } from '@/components/ui/skeleton';\n\n\nconst getInitials = (name: string) => {\n  const names = name.split(' ');\n  if (names.length > 1) {\n    return `${names[0][0]}${names[1][0]}`.toUpperCase();\n  }\n  return names[0].substring(0, 2).toUpperCase();\n};\n\nexport default function ChatPage() {\n  const params = useParams();\n  const chatId = params.id as string;\n  const router = useRouter();\n  const { toast } = useToast();\n\n  const [chat, setChat] = useState<Chat | null | undefined>(undefined); // undefined for loading state\n  const [messages, setMessages] = useState<Message[]>([]);\n  const currentUser = getCurrentUser();\n  \n  const messagesEndRef = useRef<HTMLDivElement>(null);\n\n  const fetchChatData = useCallback(() => {\n    const fetchedChat = getChatById(chatId);\n    if (fetchedChat) {\n      setChat(fetchedChat);\n      setMessages(fetchedChat.messages);\n    } else {\n      const contactId = chatId.replace('chat_with_', '');\n      const contactUser = getUserById(contactId);\n      if(contactUser && currentUser) {\n        const newChatTemplate: Chat = {\n          id: chatId,\n          participants: [contactUser, currentUser],\n          messages: [],\n          lastMessage: undefined,\n          unreadCount: 0,\n        };\n        setChat(newChatTemplate);\n        setMessages([]);\n      } else {\n        setChat(null); // Not found\n      }\n    }\n  }, [chatId, currentUser]);\n\n  useEffect(() => {\n    fetchChatData();\n  }, [fetchChatData]);\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages]);\n\n  const handleSendMessage = (content: string) => {\n    if (!chat || !currentUser) return; \n    const newMessage: Message = {\n      id: `msg${Date.now()}`,\n      senderId: currentUser.id,\n      chatId: chat.id,\n      content,\n      timestamp: Date.now(),\n      status: 'sent', \n      emojis: [],\n    };\n    addMessageToChat(chat.id, newMessage); \n    fetchChatData(); // Re-fetch chat data to get the latest messages including the new one\n  };\n  \n  const handleToggleReaction = useCallback((messageId: string, emoji: string) => {\n    if (!chat || !currentUser) return;\n    const updatedMessage = toggleEmojiReaction(chat.id, messageId, emoji);\n    if (updatedMessage) {\n      // Update the messages state to reflect the change immediately\n      setMessages(prevMessages => \n        prevMessages.map(msg => \n          msg.id === messageId ? { ...msg, emojis: updatedMessage.emojis } : msg\n        )\n      );\n      // Optionally, re-fetch the entire chat if other properties (like lastMessage) might change\n      // For now, just updating the specific message's reactions locally is often sufficient for UI\n      // fetchChatData(); // Uncomment if full re-fetch is needed\n    }\n  }, [chat, currentUser, fetchChatData]);\n\n\n  const handleCall = (type: 'audio' | 'video') => {\n    if (!otherParticipant) return;\n    toast({\n      title: `Starting ${type} call`,\n      description: `Calling ${otherParticipant.name}... (UI only)`,\n    });\n  };\n\n  if (chat === undefined) { \n    return (\n      <MainLayout title=\"Loading Chat...\" showBackButton>\n        <div className=\"p-4 space-y-4\">\n          <Skeleton className=\"h-16 w-3/4 rounded-lg\" />\n          <Skeleton className=\"h-16 w-1/2 rounded-lg self-end\" />\n          <Skeleton className=\"h-20 w-2/3 rounded-lg\" />\n        </div>\n      </MainLayout>\n    );\n  }\n\n  if (!chat) {\n    return (\n      <MainLayout title=\"Chat not found\" showBackButton>\n        <div className=\"p-4 text-center\">Chat not found or does not exist.</div>\n      </MainLayout>\n    );\n  }\n\n  const otherParticipant = chat.participants.find(p => p.id !== currentUser?.id) || chat.participants[0]; \n\n  const headerActions = (\n    <>\n      <Button variant=\"ghost\" size=\"icon\" className=\"text-primary-foreground hover:bg-primary/80\" onClick={() => handleCall('audio')}>\n        <Phone className=\"h-5 w-5\" />\n      </Button>\n      <Button variant=\"ghost\" size=\"icon\" className=\"text-primary-foreground hover:bg-primary/80\" onClick={() => handleCall('video')}>\n        <Video className=\"h-5 w-5\" />\n      </Button>\n    </>\n  );\n  \n  const chatHeaderTitle = otherParticipant ? (\n    <div className=\"flex items-center gap-2 -ml-2\">\n       <Avatar className=\"h-9 w-9 border-2 border-primary-foreground/50\">\n        <AvatarImage src={otherParticipant.avatarUrl} alt={otherParticipant.name} data-ai-hint=\"person avatar\" />\n        <AvatarFallback>{getInitials(otherParticipant.name)}</AvatarFallback>\n      </Avatar>\n      <div>\n        <h2 className=\"font-semibold text-base leading-tight truncate\">{otherParticipant.name}</h2>\n        <p className=\"text-xs opacity-80 leading-tight\">{otherParticipant.status || 'Offline'}</p>\n      </div>\n    </div>\n  ) : \"Chat\";\n\n\n  return (\n    <MainLayout title={chatHeaderTitle as unknown as string} showBackButton headerActions={headerActions}>\n      <div className=\"flex flex-col h-full\">\n        <div className=\"flex-1 overflow-y-auto pt-4 bg-background\">\n          {messages.map((msg) => (\n            <MessageBubble\n              key={msg.id}\n              message={msg}\n              currentUser={currentUser!} \n              sender={chat.participants.find(p => p.id === msg.senderId)}\n              onToggleReaction={handleToggleReaction}\n            />\n          ))}\n          <div ref={messagesEndRef} />\n        </div>\n        <ChatInput onSendMessage={handleSendMessage} />\n      </div>\n    </MainLayout>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}